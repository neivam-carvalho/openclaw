# ============================================
# OpenClaw Railway Configuration
# Deploy configurado para máxima segurança
# ============================================

[build]
dockerfile = "Dockerfile"
# Build argument para incluir browser automation
buildArgs = ["OPENCLAW_INSTALL_BROWSER=1"]

[deploy]
# Replicas
replicas = 1
# Removed aggressive healthcheck - Railway will use HTTP probe on PORT
startCommand = "node openclaw.mjs gateway --allow-unconfigured --bind lan"

[env]
# Environment essenciais
NODE_ENV = "production"
PORT = "18789"

# Diretórios de estado (Railway volume /data)
OPENCLAW_STATE_DIR = "/data"
OPENCLAW_WORKSPACE_DIR = "/data/workspace"

# ⚠️ Variáveis de segurança DEVEM ser setadas no Railway Dashboard
# Não cometer essas no git!
# SETUP_PASSWORD = "" # Setado no Railway Dashboard
# OPENCLAW_GATEWAY_TOKEN = "" # Setado no Railway Dashboard
# ANTHROPIC_API_KEY = "" # API key Anthropic
# TELEGRAM_BOT_TOKEN = "" # Bot token Telegram

[[services]]
name = "openclaw-gateway"
runtime = "docker"
protocol = "http"
port = 18789
domains = ["${{ project }}-${{ services.openclaw-gateway.name }}.railway.app"]

# Logging
[observability]
# Railway fornece logs nativos via CLI: railway logs
